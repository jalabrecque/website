<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>CK010  Course pack  - 3&nbsp; Questions before answers</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./03-confounding.html" rel="next">
<link href="./02-notation.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar floating slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./02-q-before a.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Questions before answers</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">CK010 <br> Course pack <br></a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-why.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Why bother learning this stuff?</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-notation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Notation</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-q-before a.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Questions before answers</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-confounding.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Confounding and confounders (Exchangeability part 1)</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-a whirlwind tour.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">A whirlwind tour of causal assumptions</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-statistical significance is useless.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Statistical signficance is useless</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-Regression is only the beginning.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">“Regression is only the beginning</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-uncertainty.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Uncertainty</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#descriptive-questions" id="toc-descriptive-questions" class="nav-link active" data-scroll-target="#descriptive-questions"><span class="header-section-number">3.1</span> Descriptive questions</a></li>
  <li><a href="#predictive-questions" id="toc-predictive-questions" class="nav-link" data-scroll-target="#predictive-questions"><span class="header-section-number">3.2</span> Predictive questions</a></li>
  <li><a href="#causal-questions" id="toc-causal-questions" class="nav-link" data-scroll-target="#causal-questions"><span class="header-section-number">3.3</span> Causal questions</a></li>
  <li><a href="#my-supervisor-says-i-cant-use-causal-language" id="toc-my-supervisor-says-i-cant-use-causal-language" class="nav-link" data-scroll-target="#my-supervisor-says-i-cant-use-causal-language"><span class="header-section-number">3.4</span> “My supervisor says I can’t use causal language”</a>
  <ul class="collapse">
  <li><a href="#but-we-never-know-whether-our-answer-really-is-causal" id="toc-but-we-never-know-whether-our-answer-really-is-causal" class="nav-link" data-scroll-target="#but-we-never-know-whether-our-answer-really-is-causal"><span class="header-section-number">3.4.1</span> But we never know whether our answer really is causal</a></li>
  <li><a href="#association-for-everything" id="toc-association-for-everything" class="nav-link" data-scroll-target="#association-for-everything"><span class="header-section-number">3.4.2</span> Association for everything</a></li>
  <li><a href="#biased-away-from-what" id="toc-biased-away-from-what" class="nav-link" data-scroll-target="#biased-away-from-what"><span class="header-section-number">3.4.3</span> Biased away from what?</a></li>
  <li><a href="#research-questions-that-tell-us-nothing" id="toc-research-questions-that-tell-us-nothing" class="nav-link" data-scroll-target="#research-questions-that-tell-us-nothing"><span class="header-section-number">3.4.4</span> Research questions that tell us nothing</a></li>
  <li><a href="#do-associational-research-questions-exist" id="toc-do-associational-research-questions-exist" class="nav-link" data-scroll-target="#do-associational-research-questions-exist"><span class="header-section-number">3.4.5</span> Do “associational” research questions exist?</a></li>
  </ul></li>
  <li><a href="#exercises" id="toc-exercises" class="nav-link" data-scroll-target="#exercises"><span class="header-section-number">3.5</span> Exercises</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Questions before answers</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>Researchers are bad at asking research questions. Mainly because, for some reason, our field spends most of its time teaching how to answer questions rather than how to ask them.<span class="citation" data-cites="kaufman2012">(<a href="references.html#ref-kaufman2012" role="doc-biblioref">Kaufman and Hernán 2012</a>)</span> Look through any epidemiology textbook. Do they have a chapter on asking questions?</p>
<div class="no-row-height column-margin column-container"><div id="ref-kaufman2012" class="csl-entry" role="listitem">
Kaufman, Jay S., and Miguel A. Hernán. 2012. <span>“Epidemiologic <span>Methods Are Useless</span>: <span>They Can Only Give You Answers</span>.”</span> <em>Epidemiology</em> 23 (6): 785–86. <a href="https://doi.org/10.1097/EDE.0b013e31826c30e6">https://doi.org/10.1097/EDE.0b013e31826c30e6</a>.
</div></div><p>I’d say that I wasn’t really taught much about how to ask a research questions. But after having encountered one or two situations where knowing the underlying question really clarified a lot of thinking about which methods to use and how to interpret the answer, I became more interested in how to think about good, valid and impactful research questions. And having spent a lot of time thinking about research questions, I can say that it is a common occurrence to read a paper or hear a presentation where the author/presenter says something that demonstrates that they haven’t really through their question through.</p>
<div class="page-columns page-full"><p>A 2019 paper focused the fields of epidemiology and public health (and many others) stating that there are only three types of research questions: descriptive, predictive and causal <span class="citation" data-cites="Hernan2019_CHANCE">(<a href="references.html#ref-Hernan2019_CHANCE" role="doc-biblioref">Hernán, Hsu, and Healy 2019</a>)</span>. If your first reaction is, “c’mon, there must be more,” that was mine too. Six years later, I have yet to find a research question that doesn’t fit into at least one of these categories.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> There are many frameworks out there <span class="citation" data-cites="bos2022">(e.g. <a href="references.html#ref-bos2022" role="doc-biblioref">Bos and Ikram 2022</a>)</span> but all of them, in some way, map onto these three concepts. For example, some people consider etiology and treatment effects to be two different question types.</p><div class="no-row-height column-margin column-container"><li id="fn1"><p><sup>1</sup>&nbsp;I say at least because some questions combines question types as you’ll see later in this chapter.</p></li><div id="ref-bos2022" class="csl-entry" role="listitem">
Bos, Daniel, and M. Arfan Ikram. 2022. <span>“Research <span>Aims</span> in <span>Clinical Medicine</span>: <span>Description</span>, <span>Identification</span>, or <span>Explanation</span>.”</span> <em>World Neurosurgery</em> 161 (May): 240–44. <a href="https://doi.org/10.1016/j.wneu.2021.11.081">https://doi.org/10.1016/j.wneu.2021.11.081</a>.
</div></div></div>
<div class="no-row-height column-margin column-container"><div id="ref-Hernan2019_CHANCE" class="csl-entry" role="listitem">
Hernán, Miguel A., John Hsu, and Brian Healy. 2019. <span>“A <span>Second Chance</span> to <span>Get Causal Inference Right</span>: <span>A Classification</span> of <span>Data Science Tasks</span>.”</span> <em>CHANCE</em> 32 (1): 42–49. <a href="https://doi.org/10.1080/09332480.2019.1579578">https://doi.org/10.1080/09332480.2019.1579578</a>.
</div></div><p>I’ll take you through each of the study types but the rest of the book will focus on causal questions.</p>
<section id="descriptive-questions" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="descriptive-questions"><span class="header-section-number">3.1</span> Descriptive questions</h2>
<p>My expertise is in causal inference but I’m always telling people that descriptive questions are crucially important and understudied. Descriptive questions are basically describing the state of the world now or in the past. It might be easiest to list some examples:</p>
<ul>
<li>What is the incidence of diabetes in Finland?</li>
<li>What is the prevalence of diabetes in Sweden?</li>
<li>What is the the geographic distribution of measles cases in the Canadian provine of Alberta?</li>
<li>How is the number of broken teeth among hockey players changing over time?</li>
<li>Do people earning a minimum wage salary do less exercise than people earning more than minimum wage?</li>
</ul>
<p>These are questions about the prevalence or incidence of disease or its spatial distribution. Or about about how common certain health behaviours are. Or how patterns change over time. Or comparing these descriptive values between groups.</p>
<p>Descriptive questions will mostly look very simple:</p>
<p><span class="math display">\[ \Pr[\textrm{Diabetes}_{t=1}|\textrm{Diabetes}_{t=0}=0] \]</span></p>
<p>This can read as the probability of getting diabetes at time 1 among people who did not have diabetes at time 0. If we wanted to just know the prevalence we could write:</p>
<p><span class="math display">\[ \Pr[\textrm{Diabetes}_{t=1}] \]</span> This is the probability of having diabetes at time 1 among everyone.</p>
<p>Examples of descriptive questions:</p>
<ul>
<li>What is the incidence of diabetes in the Netherlands?</li>
<li>Is the incidence of diabetes in the Netherlands increasing with time?</li>
</ul>
</section>
<section id="predictive-questions" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="predictive-questions"><span class="header-section-number">3.2</span> Predictive questions</h2>
<p>A predictive question is one in which one wants to get the best guess possible at the value of a variable or event that will happen in the future or is otherwise difficult to measure. For example, if I’m a clinician, I would like to know which of my patients is at highest risk of a bad outcome so I can focus</p>
<p>Examples of predictive questions:</p>
<ul>
<li>What is a person’s 10 year risk of cardiovascular disease?</li>
<li>What is a person’s 10 year risk of cardiovascular disease?</li>
</ul>
</section>
<section id="causal-questions" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="causal-questions"><span class="header-section-number">3.3</span> Causal questions</h2>
<p>I have a pet p</p>
</section>
<section id="my-supervisor-says-i-cant-use-causal-language" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="my-supervisor-says-i-cant-use-causal-language"><span class="header-section-number">3.4</span> “My supervisor says I can’t use causal language”</h2>
<p>I sometimes hear back from Masters students that their supervisor thinks causal language should never be in a scientific article and that everything in the article, from the research question to the final result, should be called an association.</p>
<p>For a very long time now, the field of health sciences has insisted it’s not interested in causal effects but only in associations. Some of the reasons for doing this come from motivations that are intended to improve the science. I have been having these conversations for years now putting forth my arguments for why it really makes no sense pretend we’re not trying to answer a causal answer and I have received objections, but no answer to my arguments. In the next sections I’ll go through some of these arguments. If you think you have an argument for using the word association in your research question, I’d love to hear it!</p>
<section id="the-association" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="the-association">“The” association</h4>
<p>Articles often claim that their research question is wanting to know “the” association between an exposure and outcome. I have asked people which association they are talking about when they say “the” association. No one has been able to answer me yet (unless they admit that it’s just a euphemism for a causal effect). In this paper you can see argument for why, if your underlying question is causal, it is actually impossible to frame your question as an association.</p>
</section>
<section id="but-we-never-know-whether-our-answer-really-is-causal" class="level3" data-number="3.4.1">
<h3 data-number="3.4.1" class="anchored" data-anchor-id="but-we-never-know-whether-our-answer-really-is-causal"><span class="header-section-number">3.4.1</span> But we never know whether our answer really is causal</h3>
<p>In your daily life, do you feel you can only ask a question when you’re guaranteed to get a correct answer? Is it okay to ask someone, “is it going to rain today?” if we’re unsure they’ll accurately report to us the precipitation forecast? To some, this is how we should approach causal questions. Unless you can guarantee that the answer will be unbiased, you’re not allowed to ask the question. Dude, this is science, we’re constantly asking questions that we don’t know the answer to and that our study will not give a definitive answer of.</p>
<p>We also don’t require this when people are trying to answer descriptive or predictive models. It’s known that many prediction models are either not validated or are found to be terrible. But we don’t tell people they should rephrase their question without the word prediction. Or if someone wants to know the incidence of diabetes, they can only guarantee their estimate is unbiased if it comes from a random sample of their target population. But many descriptive studies are not from random samples and we allow them nonetheless to go around saying they’re trying to answer a descriptive question!</p>
</section>
<section id="association-for-everything" class="level3" data-number="3.4.2">
<h3 data-number="3.4.2" class="anchored" data-anchor-id="association-for-everything"><span class="header-section-number">3.4.2</span> Association for everything</h3>
<p>In research, it’s crucially important to be able to distinguish your question from your answer. If you use the word association for your question and for your answer, you’re making the lines between question and answer blurry. You saw for causal questions that we have a causal estimand which we cannot know the answer to perfectly. Later you will see what role the word association plays in causal inference. Briefly, it’s just a stepping stone between your research question and the interpretation of your results. In other words, causal inference has a clear role for associations whereas it is common in epidemiology to just see it used for everything.</p>
</section>
<section id="biased-away-from-what" class="level3" data-number="3.4.3">
<h3 data-number="3.4.3" class="anchored" data-anchor-id="biased-away-from-what"><span class="header-section-number">3.4.3</span> Biased away from what?</h3>
</section>
<section id="research-questions-that-tell-us-nothing" class="level3" data-number="3.4.4">
<h3 data-number="3.4.4" class="anchored" data-anchor-id="research-questions-that-tell-us-nothing"><span class="header-section-number">3.4.4</span> Research questions that tell us nothing</h3>
<p>If a research question says something like, “Our objective is to estimate the association between education and colorectal cancer.” It is not possible to tell whether the question is descriptive or causal. As we saw earlier and as we’ll see throughout this book, the methods you use to answer descriptive and causal questions are vastly different. But this research question cannot tell us whether the article is going to be about a descriptive question where we compare colorectal incidence between education group or whether it’s going to be a causal study where we trying to control for confounding to isolate the causal effect of education on colorectal incidence. What good is a research question if it tells us almost nothing regarding what the study will be about.</p>
</section>
<section id="do-associational-research-questions-exist" class="level3" data-number="3.4.5">
<h3 data-number="3.4.5" class="anchored" data-anchor-id="do-associational-research-questions-exist"><span class="header-section-number">3.4.5</span> Do “associational” research questions exist?</h3>
<p>If an associational research question is a legitimate type of research question distinct from descriptive, predictive and causal, what methods should we use to answer it? If it’s a distinct question, it must use methods that are different. If it used exactly the same methods, how could it be a different question?</p>
<p>But there are no courses on “associational inference” that parallel “causal inference” courses. There is no one out there doing target association emulation.</p>
</section>
</section>
<section id="exercises" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="exercises"><span class="header-section-number">3.5</span> Exercises</h2>
<ol type="1">
<li>Which of the following questions is causal:</li>
</ol>



</section>


</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./02-notation.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Notation</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./03-confounding.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Confounding and confounders (Exchangeability part 1)</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
 Last updated: 14-11-2025
  </li>  
</ul>
    </div>
  </div>
</footer>



</body></html>